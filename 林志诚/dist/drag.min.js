!function(c){c.fn.drag=function(e){var s,d=this,t=!1;e=c.extend({},e);this.append('<div class="drag_bg"></div><div class="drag_text" onselectstart="return false;" unselectable="on">请按住滑块,拖动到最右边</div><div class="handler handler_bg"></div>');var o=d.find(".handler"),a=d.find(".drag_bg"),i=d.find(".drag_text"),u=d.width()-o.width();o.mousedown(function(e){t=!0,s=e.pageX-parseInt(o.css("left"),10)}),c(document).mousemove(function(e){var n=e.pageX-s;t&&(0<n&&n<=u?(o.css({left:n}),a.css({width:n})):u<n&&(o.removeClass("handler_bg").addClass("handler_ok_bg"),i.text("验证通过"),d.css({color:"#fff"}),o.unbind("mousedown"),c(document).unbind("mousemove"),c(document).unbind("mouseup"),console.log("ok")))}).mouseup(function(e){t=!1,e.pageX-s<u&&(o.css({left:0}),a.css({width:0}))})}}(jQuery);